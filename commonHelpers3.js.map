{"version":3,"file":"commonHelpers3.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nexport const fetchImages = async (search, pagePhoto, limit) => {\n  const response = await axios.get(\n    `https://pixabay.com/api/?key=44687559-d8ede6072036f50d72c2e92ab`,\n    {\n      params: {\n        q: search,\n        image_type: 'photo',\n        pretty: 'true',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: pagePhoto,\n        per_page: limit,\n      },\n    }\n  );\n  if (response.status !== 200) {\n    throw new iziToast.error({\n      position: 'topRight',\n      message: 'Sorry, there are some errors!',\n    });\n  }\n  return response.data;\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const renderImages = (data, list) => {\n  const markup = data.hits\n    .map(pic => {\n      return `<li class=\"card gallery-item\">\n        <a href=\"${pic.largeImageURL}\"><img\n          src=\"${pic.webformatURL}\"\n          alt=\"${pic.tags}\"\n          class=\"search-pic gallery-image\"\n        />\n        </a>\n        <ul class=\"description\">\n          <li><a>Likes</a> <a>${pic.likes}</a></li>\n          <li><a>Views</a> <a>${pic.views}</a></li>\n          <li><a>Comments</a> <a>${pic.comments}</a></li>\n          <li><a>Downloads</a> <a>${pic.downloads}</a></li>\n        </ul>\n      </li>`;\n    })\n    .join('');\n\n  list.insertAdjacentHTML('beforeend', markup);\n  console.log(\n    'Images added to list:',\n    list.querySelectorAll('.gallery-item').length\n  );\n\n  let gallery_x = new SimpleLightbox('.search-list a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  gallery_x.on('show.simplelightbox', function (event) {\n    event.preventDefault();\n  });\n\n  gallery_x.refresh();\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\nconst form = document.querySelector('.form-search');\nconst userText = document.querySelector('input[name=search]');\nconst list = document.querySelector('.search-list');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet search = '';\nlet pagePhoto = 1;\nconst limit = 15;\nlet totalHits = 0;\n\nconst fetchAndRenderImages = (isNewSearch = false) => {\n  if (isNewSearch) {\n    pagePhoto = 1;\n    totalHits = 0;\n    list.innerHTML = '';\n    loadMoreBtn.classList.add('hidden');\n  }\n\n  loader.style.visibility = 'visible';\n  loader.style.opacity = '1';\n\n  fetchImages(search, pagePhoto, limit)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.error({\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        loadMoreBtn.classList.add('hidden');\n      } else {\n        renderImages(data, list);\n        totalHits = data.totalHits;\n        console.log('Total Hits:', totalHits);\n        if (pagePhoto * limit >= totalHits) {\n          loadMoreBtn.classList.add('hidden');\n          iziToast.info({\n            position: 'topRight',\n            message:\n              \"We're sorry, but you've reached the end of search results.\",\n          });\n        } else {\n          loadMoreBtn.classList.remove('hidden');\n          setTimeout(smoothScroll, 100);\n        }\n      }\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      loader.style.visibility = 'hidden';\n      loader.style.opacity = '0';\n    });\n};\n\nconst smoothScroll = () => {\n  const galleryItem = document.querySelector('.gallery-image');\n  if (galleryItem) {\n    const itemHeight = galleryItem.getBoundingClientRect().height;\n\n    if (itemHeight > 0) {\n      window.scrollBy({\n        top: itemHeight * 2,\n        behavior: 'smooth',\n      });\n    } else {\n      console.log('222');\n    }\n  } else {\n    console.log('No gallery items found');\n  }\n};\n\nform.addEventListener('submit', evt => {\n  evt.preventDefault();\n  search = userText.value;\n  fetchAndRenderImages(true);\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  pagePhoto += 1;\n  fetchAndRenderImages();\n});\n"],"names":["fetchImages","search","pagePhoto","limit","response","axios","iziToast","renderImages","data","list","markup","pic","gallery_x","SimpleLightbox","event","form","userText","loadMoreBtn","loader","totalHits","fetchAndRenderImages","isNewSearch","smoothScroll","error","galleryItem","itemHeight","evt"],"mappings":"kGAGO,MAAMA,EAAc,MAAOC,EAAQC,EAAWC,IAAU,CAC7D,MAAMC,EAAW,MAAMC,EAAM,IAC3B,kEACA,CACE,OAAQ,CACN,EAAGJ,EACH,WAAY,QACZ,OAAQ,OACR,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAUC,CACX,CACF,CACL,EACE,GAAIC,EAAS,SAAW,IACtB,MAAM,IAAIE,EAAS,MAAM,CACvB,SAAU,WACV,QAAS,+BACf,CAAK,EAEH,OAAOF,EAAS,IAClB,ECtBaG,EAAe,CAACC,EAAMC,IAAS,CAC1C,MAAMC,EAASF,EAAK,KACjB,IAAIG,GACI;AAAA,mBACMA,EAAI,aAAa;AAAA,iBACnBA,EAAI,YAAY;AAAA,iBAChBA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,gCAKOA,EAAI,KAAK;AAAA,gCACTA,EAAI,KAAK;AAAA,mCACNA,EAAI,QAAQ;AAAA,oCACXA,EAAI,SAAS;AAAA;AAAA,YAG5C,EACA,KAAK,EAAE,EAEVF,EAAK,mBAAmB,YAAaC,CAAM,EAC3C,QAAQ,IACN,wBACAD,EAAK,iBAAiB,eAAe,EAAE,MAC3C,EAEE,IAAIG,EAAY,IAAIC,EAAe,iBAAkB,CACnD,aAAc,MACd,aAAc,GAClB,CAAG,EAEDD,EAAU,GAAG,sBAAuB,SAAUE,EAAO,CACnDA,EAAM,eAAc,CACxB,CAAG,EAEDF,EAAU,QAAO,CACnB,ECjCMG,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAW,SAAS,cAAc,oBAAoB,EACtDP,EAAO,SAAS,cAAc,cAAc,EAC5CQ,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIjB,EAAS,GACTC,EAAY,EAChB,MAAMC,EAAQ,GACd,IAAIgB,EAAY,EAEhB,MAAMC,EAAuB,CAACC,EAAc,KAAU,CAChDA,IACFnB,EAAY,EACZiB,EAAY,EACZV,EAAK,UAAY,GACjBQ,EAAY,UAAU,IAAI,QAAQ,GAGpCC,EAAO,MAAM,WAAa,UAC1BA,EAAO,MAAM,QAAU,IAEvBlB,EAAYC,EAAQC,EAAWC,CAAK,EACjC,KAAKK,GAAQ,CACRA,EAAK,KAAK,SAAW,GACvBF,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACZ,CAAS,EACDW,EAAY,UAAU,IAAI,QAAQ,IAElCV,EAAaC,EAAMC,CAAI,EACvBU,EAAYX,EAAK,UACjB,QAAQ,IAAI,cAAeW,CAAS,EAChCjB,EAAYC,GAASgB,GACvBF,EAAY,UAAU,IAAI,QAAQ,EAClCX,EAAS,KAAK,CACZ,SAAU,WACV,QACE,4DACd,CAAW,IAEDW,EAAY,UAAU,OAAO,QAAQ,EACrC,WAAWK,EAAc,GAAG,GAGtC,CAAK,EACA,MAAMC,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAM,CACbL,EAAO,MAAM,WAAa,SAC1BA,EAAO,MAAM,QAAU,GAC7B,CAAK,CACL,EAEMI,EAAe,IAAM,CACzB,MAAME,EAAc,SAAS,cAAc,gBAAgB,EAC3D,GAAIA,EAAa,CACf,MAAMC,EAAaD,EAAY,sBAAqB,EAAG,OAEnDC,EAAa,EACf,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAO,EAED,QAAQ,IAAI,KAAK,CAEvB,MACI,QAAQ,IAAI,wBAAwB,CAExC,EAEAV,EAAK,iBAAiB,SAAUW,GAAO,CACrCA,EAAI,eAAc,EAClBzB,EAASe,EAAS,MAClBI,EAAqB,EAAI,CAC3B,CAAC,EAEDH,EAAY,iBAAiB,QAAS,IAAM,CAC1Cf,GAAa,EACbkB,GACF,CAAC"}